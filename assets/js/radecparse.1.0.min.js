function protectint(e,r=1e-8){return 1-e%1<r?parseInt(e+r):parseInt(e)}function protectzero(e,r=1e-8){return Math.abs(e)<r?0:e}function truncate(e,r){var t=Math.pow(10,r);return Math.floor(e*t)/t}function zeroPad(e,r){var t=Math.abs(e),a=Math.max(0,r-Math.floor(t).toString().length),o=Math.pow(10,a).toString().substr(1);return e<0&&(o="-"+o),o+t}function degconvert(e,r){var t="",a="",o="",n="",i="",d=!1,s=!1,p=!1,c="";if(e>=0&&e<360?s=!0:c+=`Invalid RA Input: ${e} - RA must be within range 0<=RA<360\n`,r>=-90&&r<=90?p=!0:c+=`Invalid Dec Input: ${r} - Declination must be within range -90<=Dec<=90\n`,s&&p&&(d=!0),d){var l=protectint(e),$=protectint(60*(e-l)),u=e-l-$/60;u=protectzero(3600*u);var h=e*(24/360),z=protectint(h),f=protectint(60*(h-z)),P=h-z-f/60;P=protectzero(3600*P);var g=1,v=r;r<0&&(g=-1,r=Math.abs(r));var F=protectint(r),x=protectint(60*(r-F)),m=r-F-x/60;m=protectzero(3600*m),F*=g,t=`${zeroPad(z,2)}:${zeroPad(f,2)}:${zeroPad(P.toFixed(3),2)} `,t+=`${zeroPad(F,2)}:${zeroPad(x,2)}:${zeroPad(m.toFixed(3),2)}`,a=`${zeroPad(z,2)}h${zeroPad(f,2)}m${zeroPad(P.toFixed(3),2)}s `,a+=`${zeroPad(F,2)}d${zeroPad(x,2)}m${zeroPad(m.toFixed(3),2)}s`,o=`${zeroPad(z,2)} ${zeroPad(f,2)} ${zeroPad(P.toFixed(3),2)} `,o+=`${zeroPad(F,2)} ${zeroPad(x,2)} ${zeroPad(m.toFixed(3),2)}`,n=`${zeroPad(l,2)}d${zeroPad($,2)}m${zeroPad(u.toFixed(3),2)}s `,n+=`${zeroPad(F,2)}d${zeroPad(x,2)}m${zeroPad(m.toFixed(3),2)}s`,i=`${h.toFixed(8)}h ${v.toFixed(8)}d`}return[d,t,a,o,n,i,c]}function shrinkspaces(e){for(var r=e.indexOf("  ");r>-1;)r=(e=e.substring(0,r)+e.substring(r+1)).indexOf("  ");return e}function characterHist(e){return[...e].reduce((e,r)=>e[r]?{...e,[r]:e[r]+1}:{...e,[r]:1},{})}function replaceCharWith(e,r,t){var a=e.indexOf(r);return a>=0&&(e=e.substring(0,a)+t+e.substring(a+1)),e}function rdp(e){let r=e.indexOf("âˆ’");r>-1&&(e=e.substring(0,r)+"-"+e.substring(r+1));var t=(e=shrinkspaces(e)).split(" "),a=t.length,o=characterHist(t.join("")),n=0,i=0,d=0,s=0,p=0,c=0,l=0,$=0;"."in o&&(n=o["."]),":"in o&&(i=o[":"]),"h"in o&&(d=o.h),"m"in o&&(s=o.m),"s"in o&&(p=o.s),"d"in o&&(c=o.d),"+"in o&&(l=o["+"]),"-"in o&&($=o["-"]);var u="",h="",z=0,f=0,P=0,g=0,v="";var F=!1;if(1==a&&(1==l||1==$)){if(1==l)var x=e.indexOf("+");else x=e.indexOf("-");t=[e.substring(0,x),e.substring(x)],a=2}if(2==a&&n>=0&&n<=2&&0==i&&0==d&&0==s&&0==p&&2==c){let e=(u=t[0]).indexOf("d");e>=0&&(u=u.substring(0,e)),(e=(h=t[1]).indexOf("d"))>=0&&(h=h.substring(0,e)),t=[u,h],c=0}2==a&&n>=0&&n<=2&&0==i&&0==d&&0==s&&0==p&&0==c&&(P=parseFloat(t[0]),g=parseFloat(t[1]),P>=0&&P<360&&g>=-90&&g<=90?(F=!0,z=P,f=g):v+=`Invalid range of RA: ${P} [0-360 deg) or declination: ${g} [-90 - 90 deg]`);var m=t[0].split("d").length-1;if(2==a&&1==m&&0==i){P=0;var I=(u=t[0]).split("d"),b=parseFloat(I[0]);if(1==I[1].split("m").length-1){var C=I[1].split("m");if(b+=parseFloat(C[0])/60,1==C[1].split("s").length-1){var M=C[1].split("s");b+=parseFloat(M[0])/3600}}let e=b*(24/360),r=protectint(e),a=e-r,o=protectint(60*a),n=a-o/60;n=truncate(protectzero(3600*n),3),t[0]=`${zeroPad(r,2)}:${zeroPad(o,2)}:${zeroPad(n.toFixed(3),2)}`,c-=1,d=1}2==a&&0==i&&(d>0||s>0||p>0)&&1==c&&(i=1,u=replaceCharWith(u=t[0],"h",":"),u=replaceCharWith(u,"m",":"),u=replaceCharWith(u,"s",""),h=replaceCharWith(h=t[1],"d",":"),h=replaceCharWith(h,"m",":"),t=[u,h=replaceCharWith(h,"s","")]);if(4==a&&0==i&&0==n){for(let e=0;e<a;e++)t[e]=t[e].replace(/[^\d.-]/g,"");a=2,i=1,t[0]=`${zeroPad(parseInt(t[0]),2)}:${zeroPad(parseInt(t[1]),2)}:`,t[1]=`${zeroPad(parseInt(t[2]),2)}:${zeroPad(parseInt(t[3]),2)}:`}if(6==a&&0==i&&n>=0&&n<=2){for(let e=0;e<a;e++)t[e]=t[e].replace(/[^\d.-]/g,"");a=2,i=1,t[0]=`${zeroPad(parseInt(t[0]),2)}:${zeroPad(parseInt(t[1]),2)}:${zeroPad(parseFloat(t[2]).toFixed(3),2)}`,t[1]=`${zeroPad(parseInt(t[3]),2)}:${zeroPad(parseInt(t[4]),2)}:${zeroPad(parseFloat(t[5]).toFixed(3),2)}`}if(2==a&&i>=1){var O=t[0].split(":"),W=O.length,w=0,A=0,R=0;O[0]&&(w=parseFloat(O[0])),W>=2&&O[1]&&(A=parseFloat(O[1])),3==W&&O[2]&&(R=truncate(parseFloat(O[2]),3));var D=t[1].split(":"),k=D.length,H=0,S=0,j=0;D[0]&&(H=parseFloat(D[0])),k>=2&&D[1]&&(S=parseFloat(D[1])),3==k&&D[2]&&(j=truncate(parseFloat(D[2]),3)),W>=1&&W<=3&&k>=1&&k<=3?w>=0&&w<24&&A>=0&&A<60&&R>=0&&R<60?H>=-90&&H<=90&&S>=0&&S<60&&j>=0&&j<60?(f=H>=0?H+S*(1/60)+j*(1/60/60):H-S*(1/60)-j*(1/60/60),(z=15*w+.25*A+R*(.25/60))>=0&&z<360&&f>=-90&&f<=90?F=!0:v+=`Unexpected validation error for ${e} ra [deg] ${z} dec [deg] ${f}`):v+=`Invalid range of declination deg: ${H} [-90 - 90 deg] or minutes: ${S} [0-60 min) or seconds: ${j} [0-60sec)`:v+=`Invalid range of ra hour: ${w} [0-24 hr) or minutes: ${A} [0-60 min) or seconds ${R} [0-60sec)`:v+=`Too many colons encountered in requested ra or dec ${cst}`}return F||""!==v||(v+=`Could not find handler for input ${e}`),[z,f,F,v]}